# Bash scripts

**1. Общее количество запросов**
- echo '...' > - в файл result_1.txt записывается заголовок
- cat считывает файл access.log
- wc с флагом -l считает общее количество строк в файле
- Результат записывается в конец файла result_1.txt

**2. Общее количество запросов по типу**
- echo '...' > - в файл result_2.txt записывается заголовок
- cat считывает файл access.log
- awk '{print $6}' - вывод 6 столбца (метод запроса)
- sort - сортировка по методам запроса, чтобы можно было удобно применить следующую команду
- uniq -c - собираются уникальные строки и считается количество каждой уникальной строки
- sort -nr - сортировка по числовому значению и в порядке убывания
- awk '{print $2, $1}' - меняем порядок столбцов
- sed 's/"//' - замена знака '"' на пустую строку
- Результат записывается в конец файла result_2.txt

**3. Топ 10 самых частых запросов**
- echo '...' > - в файл result_3.txt записывается заголовок
- cat считывает файл access.log
- awk '{print $7}' - вывод 7 столбца (location запроса)
- sort - сортировка по location запроса, чтобы можно было удобно применить следующую команду
- uniq -c - собираются уникальные строки и считается количество каждой уникальной строки
- sort -nr - сортировка по числовому значению и в порядке убывания
- head -n10 - вывод первых 10 строк
- awk '{print $2, $1}' - меняем порядок столбцов
- Результат записывается в конец файла result_3.txt

**4. Топ 5 самых больших по размеру запросов, которые завершились клиентской (4ХХ) ошибкой**
- echo '...' > - в файл result_4.txt записывается заголовок
- cat считывает файл access.log
- awk '$9 ~ /^4[0-9][0-9]/ {print $0}' - вывод всех столбцов в строке, в которой в 9 столбце (статус код) содержится значение начинающееся с 4XX
- sort -nr -k10 - сортировка по 10 столбцу (размер запроса) по числовому значению и в порядке убывания
- head -n5 - вывод первых 5 строк
- awk '{print $7,$9,$10,$1}' - меняем порядок столбцов
- Результат записывается в конец файла result_4.txt

**5. Топ 5 пользователей по количеству запросов, которые завершились серверной (5ХХ) ошибкой**
- echo '...' > - в файл result_5.txt записывается заголовок
- cat считывает файл access.log
- awk '$9 ~ /^5[0-9][0-9]/ {print $1}' - вывод первого столбца (ip запроса) в строке, в которой в 9 столбце (статус код) содержится значение начинающееся с 5XX
- uniq -c - собираются уникальные строки и считается количество каждой уникальной строки
- sort -nr - сортировка по числовому значению и в порядке убывания
- head -n5 - вывод первых 5 строк
- awk '{print $2, $1}' - меняем порядок столбцов
- Результат записывается в конец файла result_5.txt